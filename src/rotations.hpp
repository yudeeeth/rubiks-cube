#include <bits/stdc++.h>
using namespace std;
vector<vector<vector<int>>> rotations = {{
                                             {0, 1, 2, 3},

                                             {16, 12, 8, 4},

                                             {24, 25, 26, 27},

                                             {28, 40, 36, 32},

                                             {41, 37, 33, 29},
                                         },
                                         {
                                             {3, 2, 1, 0},
                                             {4, 8, 12, 16},
                                             {27, 26, 25, 24},
                                             {32, 36, 40, 28},
                                             {29, 33, 37, 41},
                                         },
                                         {
                                             {0, 1, 2, 3},

                                             {16, 12, 8, 4},

                                             {24, 25, 26, 27},

                                             {28, 40, 36, 32},

                                             {41, 37, 33, 29},

                                             {0, 1, 2, 3},

                                             {16, 12, 8, 4},

                                             {24, 25, 26, 27},

                                             {28, 40, 36, 32},

                                             {41, 37, 33, 29},

                                         },
                                         {
                                             {4, 5, 6, 7},

                                             {3, 11, 23, 17},

                                             {28, 29, 30, 31},

                                             {41, 27, 35, 47},

                                             {24, 32, 44, 42},

                                         },
                                         {
                                             {7, 6, 5, 4},

                                             {17, 23, 11, 3},

                                             {31, 30, 29, 28},

                                             {47, 35, 27, 41},

                                             {42, 44, 32, 24},

                                         },
                                         {
                                             {4, 5, 6, 7},

                                             {3, 11, 23, 17},

                                             {28, 29, 30, 31},

                                             {41, 27, 35, 47},

                                             {24, 32, 44, 42},

                                             {4, 5, 6, 7},

                                             {3, 11, 23, 17},

                                             {28, 29, 30, 31},

                                             {41, 27, 35, 47},

                                             {24, 32, 44, 42},

                                         },
                                         {
                                             {8, 9, 10, 11},

                                             {2, 15, 20, 5},

                                             {32, 33, 34, 35},

                                             {29, 26, 39, 44},

                                             {27, 36, 45, 30},

                                         },
                                         {
                                             {11, 10, 9, 8},

                                             {5, 20, 15, 2},

                                             {35, 34, 33, 32},

                                             {44, 39, 26, 29},

                                             {30, 45, 36, 27},

                                         },
                                         {
                                             {8, 9, 10, 11},

                                             {2, 15, 20, 5},

                                             {32, 33, 34, 35},

                                             {29, 26, 39, 44},

                                             {27, 36, 45, 30},

                                             {8, 9, 10, 11},

                                             {2, 15, 20, 5},

                                             {32, 33, 34, 35},

                                             {29, 26, 39, 44},

                                             {27, 36, 45, 30},

                                         },
                                         {
                                             {12, 13, 14, 15},

                                             {1, 19, 21, 9},

                                             {36, 37, 38, 39},

                                             {33, 25, 43, 45},

                                             {26, 40, 46, 34},

                                         },
                                         {
                                             {15, 14, 13, 12},

                                             {9, 21, 19, 1},

                                             {39, 38, 37, 36},

                                             {45, 43, 25, 33},

                                             {34, 46, 40, 26},

                                         },
                                         {
                                             {12, 13, 14, 15},

                                             {1, 19, 21, 9},

                                             {36, 37, 38, 39},

                                             {33, 25, 43, 45},

                                             {26, 40, 46, 34},

                                             {12, 13, 14, 15},

                                             {1, 19, 21, 9},

                                             {36, 37, 38, 39},

                                             {33, 25, 43, 45},

                                             {26, 40, 46, 34},

                                         },
                                         {
                                             {16, 17, 18, 19},

                                             {0, 7, 22, 13},

                                             {40, 41, 42, 43},

                                             {37, 24, 31, 46},

                                             {25, 28, 47, 38},

                                         },
                                         {
                                             {19, 18, 17, 16},

                                             {13, 22, 7, 0},

                                             {43, 42, 41, 40},

                                             {46, 31, 24, 37},

                                             {38, 47, 28, 25},

                                         },
                                         {
                                             {16, 17, 18, 19},

                                             {0, 7, 22, 13},

                                             {40, 41, 42, 43},

                                             {37, 24, 31, 46},

                                             {25, 28, 47, 38},

                                             {16, 17, 18, 19},

                                             {0, 7, 22, 13},

                                             {40, 41, 42, 43},

                                             {37, 24, 31, 46},

                                             {25, 28, 47, 38},

                                         },
                                         {
                                             {20, 21, 22, 23},

                                             {10, 14, 18, 6},

                                             {44, 45, 46, 47},

                                             {30, 34, 38, 42},

                                             {35, 39, 43, 31},

                                         },
                                         {
                                             {23, 22, 21, 20},

                                             {6, 18, 14, 10},

                                             {47, 46, 45, 44},

                                             {42, 38, 34, 30},

                                             {31, 43, 39, 35},

                                         },
                                         {
                                             {20, 21, 22, 23},

                                             {10, 14, 18, 6},

                                             {44, 45, 46, 47},

                                             {30, 34, 38, 42},

                                             {35, 39, 43, 31},

                                             {20, 21, 22, 23},

                                             {10, 14, 18, 6},

                                             {44, 45, 46, 47},

                                             {30, 34, 38, 42},

                                             {35, 39, 43, 31},
                                         }};

string initState = {
    'w', 'w', 'w', 'w', 'o', 'o', 'o', 'o',
    'g', 'g', 'g', 'g', 'r', 'r', 'r', 'r',
    'b', 'b', 'b', 'b', 'y', 'y', 'y', 'y',
    'w', 'w', 'w', 'w', 'o', 'o', 'o', 'o',
    'g', 'g', 'g', 'g', 'r', 'r', 'r', 'r',
    'b', 'b', 'b', 'b', 'y', 'y', 'y', 'y',
    'w', 'o', 'g', 'r', 'b', 'y',
};

vector<string> moves = {
    "u", "u'", "u2", "l", "l'", "l2", "f", "f'", "f2",
    "r", "r'", "r2", "b", "b'", "b2", "d", "d'", "d2"
};

map<string,int> movesToInt;

vector<vector<int>> printIndices = {{
                                       -1,
                                       -1,
                                       -1,
                                       24,
                                       0,
                                       25,
                                   },
                                   {
                                       -1,
                                       -1,
                                       -1,
                                       3,
                                       48,
                                       1,
                                   },
                                   {
                                       -1,
                                       -1,
                                       -1,
                                       27,
                                       2,
                                       26,
                                   },
                                   {
                                       28,
                                       4,
                                       29,
                                       32,
                                       8,
                                       33,
                                       36,
                                       12,
                                       37,
                                       40,
                                       16,
                                       41,
                                   },
                                   {
                                       7,
                                       49,
                                       5,
                                       11,
                                       50,
                                       9,
                                       15,
                                       51,
                                       13,
                                       19,
                                       52,
                                       17,
                                   },
                                   {
                                       31,
                                       6,
                                       30,
                                       35,
                                       10,
                                       34,
                                       39,
                                       14,
                                       38,
                                       43,
                                       18,
                                       42,
                                   },
                                   {
                                       -1,
                                       -1,
                                       -1,
                                       44,
                                       20,
                                       45,
                                   },
                                   {
                                       -1,
                                       -1,
                                       -1,
                                       23,
                                       53,
                                       21,
                                   },
                                   {
                                       -1,
                                       -1,
                                       -1,
                                       47,
                                       22,
                                       46,
                                   }};

vector<pair<char,char>> udSliceColors = {
    {'g','r'},
    {'g','o'},
    {'b','r'},
    {'b','o'}
};
vector<pair<int,int>> udSlicePositions = {
    {5,11},
    {7,17},
    {9,15},
    {13,19},
};